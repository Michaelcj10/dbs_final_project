(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{179:function(e,t,n){"use strict";var r=n(49),a=n(14),i=n(16),o=n(36),c=n(0),s=n.n(c),l=n(205),u=n(37),f=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},p=u.b.div(d||(d=f(["\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    background: rgba(255,255,255, 0.5);\n"],["\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    background: rgba(255,255,255, 0.5);\n"]))),m=Object(u.b)(l.a)(g||(g=f(["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n"],["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n"])));var d,g,b=function(){return c.createElement(p,null,c.createElement(m,{size:"large"}))},v=n(73),h=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};t.a=Object(o.c)((function(e){return{userProfile:e.counter.userProfile}}),(function(e){return Object(i.b)({changePage:function(e){return Object(a.d)(e)},setUserProfile:r.c,setOrganisation:r.b},e)}))((function(e){var t=Object(c.useState)(!1),n=t[0],r=t[1];return Object(c.useEffect)((function(){!function(){h(this,void 0,void 0,(function(){var t,n,a;return y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),[4,Object(v.b)("me")];case 1:return(t=i.sent())&&t.user?[3,2]:(e.changePage("/auth"),[3,6]);case 2:e.setUserProfile(t),r(!0),i.label=3;case 3:return i.trys.push([3,5,,6]),[4,Object(v.b)("organisations/"+t.userId)];case 4:return n=i.sent(),e.setOrganisation(n),[3,6];case 5:return a=i.sent(),console.log(a),[3,6];case 6:return[3,8];case 7:return i.sent(),e.changePage("/auth"),[3,8];case 8:return[2]}}))}))}()}),[]),n?e.children:s.a.createElement(b,null)}))},186:function(e,t,n){var r=n(174),a=n(187),i=n(188),o=Math.max,c=Math.min;e.exports=function(e,t,n){var s,l,u,f,p,m,d=0,g=!1,b=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=s,r=l;return s=l=void 0,d=t,f=e.apply(r,n)}function y(e){return d=e,p=setTimeout(E,t),g?h(e):f}function w(e){var n=e-m;return void 0===m||n>=t||n<0||b&&e-d>=u}function E(){var e=a();if(w(e))return O(e);p=setTimeout(E,function(e){var n=t-(e-m);return b?c(n,u-(e-d)):n}(e))}function O(e){return p=void 0,v&&s?h(e):(s=l=void 0,f)}function x(){var e=a(),n=w(e);if(s=arguments,l=this,m=e,n){if(void 0===p)return y(m);if(b)return clearTimeout(p),p=setTimeout(E,t),h(m)}return void 0===p&&(p=setTimeout(E,t)),f}return t=i(t)||0,r(n)&&(g=!!n.leading,u=(b="maxWait"in n)?o(i(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),x.cancel=function(){void 0!==p&&clearTimeout(p),d=0,s=m=l=p=void 0},x.flush=function(){return void 0===p?f:O(a())},x}},187:function(e,t,n){var r=n(173);e.exports=function(){return r.Date.now()}},188:function(e,t,n){var r=n(174),a=n(189),i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=c.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}},189:function(e,t,n){var r=n(176),a=n(177);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},205:function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(3),o=n.n(i),c=n(7),s=n.n(c),l=n(10),u=n.n(l),f=n(11),p=n.n(f),m=n(12),d=n.n(m),g=n(0),b=n(2),v=n.n(b),h=n(18),y=n(186),w=n.n(y),E=n(77),O=n(30),x=n(8),N=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},j=(Object(O.a)("small","default","large"),null);var P=function(e){p()(n,e);var t=d()(n);function n(e){var r;s()(this,n),(r=t.call(this,e)).debouncifyUpdateSpinning=function(e){var t=(e||r.props).delay;t&&(r.cancelExistingSpin(),r.updateSpinning=w()(r.originalUpdateSpinning,t))},r.updateSpinning=function(){var e=r.props.spinning;r.state.spinning!==e&&r.setState({spinning:e})},r.renderSpin=function(e){var t,n=e.getPrefixCls,i=e.direction,c=r.props,s=c.prefixCls,l=c.className,u=c.size,f=c.tip,p=c.wrapperClassName,m=c.style,d=N(c,["prefixCls","className","size","tip","wrapperClassName","style"]),b=r.state.spinning,y=n("spin",s),w=v()(y,(t={},o()(t,"".concat(y,"-sm"),"small"===u),o()(t,"".concat(y,"-lg"),"large"===u),o()(t,"".concat(y,"-spinning"),b),o()(t,"".concat(y,"-show-text"),!!f),o()(t,"".concat(y,"-rtl"),"rtl"===i),t),l),E=Object(h.default)(d,["spinning","delay","indicator"]),O=g.createElement("div",a()({},E,{style:m,className:w}),function(e,t){var n=t.indicator,r="".concat(e,"-dot");return null===n?null:Object(x.b)(n)?Object(x.a)(n,{className:v()(n.props.className,r)}):Object(x.b)(j)?Object(x.a)(j,{className:v()(j.props.className,r)}):g.createElement("span",{className:v()(r,"".concat(e,"-dot-spin"))},g.createElement("i",{className:"".concat(e,"-dot-item")}),g.createElement("i",{className:"".concat(e,"-dot-item")}),g.createElement("i",{className:"".concat(e,"-dot-item")}),g.createElement("i",{className:"".concat(e,"-dot-item")}))}(y,r.props),f?g.createElement("div",{className:"".concat(y,"-text")},f):null);if(r.isNestedPattern()){var P=v()("".concat(y,"-container"),o()({},"".concat(y,"-blur"),b));return g.createElement("div",a()({},E,{className:v()("".concat(y,"-nested-loading"),p)}),b&&g.createElement("div",{key:"loading"},O),g.createElement("div",{className:P,key:"container"},r.props.children))}return O};var i=e.spinning,c=function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(i,e.delay);return r.state={spinning:i&&!c},r.originalUpdateSpinning=r.updateSpinning,r.debouncifyUpdateSpinning(e),r}return u()(n,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||!this.props.children)}},{key:"render",value:function(){return g.createElement(E.a,null,this.renderSpin)}}],[{key:"setDefaultIndicator",value:function(e){j=e}}]),n}(g.Component);P.defaultProps={spinning:!0,size:"default",wrapperClassName:""},t.a=P},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t=new Date(e),n=new Date;return n.getFullYear()>t.getFullYear()?n.getFullYear()-t.getFullYear()+" years ago":n.getFullYear()===t.getFullYear()&&n.getMonth()!==t.getMonth()?n.getMonth()-t.getMonth()+" months ago":n.getMonth()===t.getMonth()&&n.getDay()!==t.getDay()?n.getDay()-t.getDay()+" days ago":n.getDay()===t.getDay()&&n.getHours()!==t.getHours()?n.getHours()-t.getHours()+" hours ago":n.getHours()===t.getHours()&&n.getMinutes()!==t.getMinutes()?n.getMinutes()-t.getMinutes()+" minutes ago":"Just now"}},390:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(14),i=n(16),o=n(36),c=n(385),s=n(368),l=n(371),u=n(282),f=n(284),p=n(1),m=n.n(p),d=n(3),g=n.n(d),b=n(2),v=n.n(b),h=n(77),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},w=function(e){var t=e.actions,n=e.author,a=e.avatar,i=e.children,o=e.className,c=e.content,s=e.prefixCls,l=e.datetime,u=y(e,["actions","author","avatar","children","className","content","prefixCls","datetime"]),f=r.useContext(h.b),p=f.getPrefixCls,d=f.direction,b=p("comment",s),w=a?r.createElement("div",{className:"".concat(b,"-avatar")},"string"==typeof a?r.createElement("img",{src:a,alt:"comment-avatar"}):a):null,E=t&&t.length?r.createElement("ul",{className:"".concat(b,"-actions")},t.map((function(e,t){return r.createElement("li",{key:"action-".concat(t)},e)}))):null,O=(n||l)&&r.createElement("div",{className:"".concat(b,"-content-author")},n&&r.createElement("span",{className:"".concat(b,"-content-author-name")},n),l&&r.createElement("span",{className:"".concat(b,"-content-author-time")},l)),x=r.createElement("div",{className:"".concat(b,"-content")},O,r.createElement("div",{className:"".concat(b,"-content-detail")},c),E),N=v()(b,o,g()({},"".concat(b,"-rtl"),"rtl"===d));return r.createElement("div",m()({},u,{className:N}),r.createElement("div",{className:"".concat(b,"-inner")},w,x),i?function(e,t){return r.createElement("div",{className:v()("".concat(e,"-nested"))},t)}(b,i):null)},E=n(111),O=n(383),x=n(52),N=n(179),j=n(37),P=n(208),S=n(172),k=n(73),C=n(49),M=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},D=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},U=c.a.Title,z=c.a.Paragraph,I=s.a.TextArea,Y=j.b.span(H||(H=M(["\n  font-weight:bold;\n\n  span{\n    font-weight: normal;\n    font-size: 12px;\n  }\n"],["\n  font-weight:bold;\n\n  span{\n    font-weight: normal;\n    font-size: 12px;\n  }\n"]))),F=Object(j.b)(I)(_||(_=M(["\n    resize: none;\n"],["\n    resize: none;\n"])));var H,_;t.default=Object(o.c)((function(e){var t=e.counter;return{message:t.message,userProfile:t.userProfile}}),(function(e){return Object(i.b)({changePage:function(e){return Object(a.d)(e)},setViewedMsg:C.d},e)}))((function(e){var t=this,n=Object(r.useState)(""),a=n[0],i=n[1],o=e.userProfile&&e.userProfile.user?e.userProfile.user.email:"";return console.log(e),r.createElement(N.a,null,r.createElement("div",{className:"layout"},r.createElement(u.a,null,r.createElement(f.a,{span:2,lg:6}),r.createElement(f.a,{span:20,lg:12},r.createElement(U,null,e.message.title),r.createElement(Y,null,Object(P.a)(e.message.Created_date)),r.createElement(z,null,e.message.comment),e.message.replies.map((function(e){return r.createElement(w,{key:""+e._id,author:e.username===o?"You":e.username,avatar:r.createElement(E.a,{style:{backgroundColor:"f56a00"},icon:r.createElement(S.a,null)}),content:e.reply,datetime:Object(P.a)(e.Created_date)})})),r.createElement(O.a.Item,null,r.createElement(U,{level:4},"Leave a comment"),r.createElement(F,{rows:4,value:a,onChange:function(e){i(e.target.value)}})),r.createElement(O.a.Item,null,r.createElement(x.a,{htmlType:"submit",loading:!1,onClick:function(){return D(t,void 0,void 0,(function(){var n,r,o;return T(this,(function(c){switch(c.label){case 0:if(""===a)return l.b.error("Please enter a comment"),[2];(n=e.message.replies).push({reply:a,username:e.userProfile.user.email}),r={title:e.message.title,comment:e.message.comment,replies:n},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Object(k.d)("messages/"+e.message._id,r,!0)];case 2:return o=c.sent(),console.log(o),D(t,void 0,void 0,(function(){var t;return T(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Object(k.b)("messages/"+e.message._id)];case 1:return t=n.sent(),console.log(t),e.setViewedMsg(t),[3,3];case 2:return n.sent(),l.b.error("Something went wrong"),[3,3];case 3:return[2]}}))})),i(""),l.b.success("Comment posted!"),[3,4];case 3:return c.sent(),i(""),l.b.error("Something went wrong"),[3,4];case 4:return[2]}}))}))},type:"primary"},"Add Comment"))),r.createElement(f.a,{span:2,lg:6}))))}))}}]);
//# sourceMappingURL=7.js.map