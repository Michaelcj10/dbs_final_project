{"version":3,"sources":["webpack:///./src/api/apiRequest.ts","webpack:///./node_modules/antd/es/divider/index.js","webpack:///./src/routes/auth/auth.tsx"],"names":["fetchReq","apiUrl","makeGet","url","cookieAuth","method","withCredentials","headers","Accept","then","res","json","makePost","postData","fetchData","body","JSON","stringify","makePostWithAuth","isPut","catch","err","console","log","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","props","_ref","_classNames","getPrefixCls","direction","customizePrefixCls","prefixCls","_props$type","type","_props$orientation","orientation","className","children","dashed","plain","restProps","orientationPrefix","concat","hasChildren","classString","role","Title","Paragraph","FullBtn","SwitchLink","userProfile","dispatch","changePage","value","hasAccount","setHasAccount","formLoading","setLoading","info","span","lg","layout","name","initialValues","remember","onFinish","values","dataPost","email","id","password","response","errors","error","token","Item","label","rules","required","message","disabled","Password","htmlType","loading","size","onClick"],"mappings":"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","file":"8.js","sourcesContent":["import { getCookie } from \"../services/cookie\";\r\n\r\nconst fetchReq = require(\"node-fetch\");\r\nconst apiUrl = \"https://project-10521262.herokuapp.com/\";\r\n\r\nexport const makeGet = async (url: string) => {\r\n\r\n    const cookieAuth = getCookie(\"token\");\r\n\r\n    let fetchData = {\r\n        method: \"GET\",\r\n        withCredentials: true,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n          \"Authorization\" : cookieAuth\r\n        }\r\n      };\r\n\r\n    return await fetchReq(apiUrl + url, fetchData, {\r\n        method: \"GET\"\r\n      }).then(res => res.json());\r\n};\r\n\r\nexport const makePost = async (url: string, postData ) => {\r\n    let fetchData = {\r\n          method: \"POST\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify({\r\n            ...postData\r\n          })\r\n      };\r\n\r\n    return await fetchReq(apiUrl + url, fetchData, {\r\n        method: \"POST\"\r\n      }).then(res => res.json());\r\n};\r\n\r\nexport const makePostWithAuth = async (url: string, postData, isPut: boolean = false ) => {\r\n\r\n     const cookieAuth = getCookie(\"token\");\r\n \r\n     let fetchData = {\r\n           method: isPut ? \"PUT\" : \"POST\",\r\n           headers: {\r\n             Accept: \"application/json\",\r\n             \"Content-Type\": \"application/json\",\r\n             \"Authorization\": cookieAuth\r\n           },\r\n           withCredentials: true,\r\n           body: JSON.stringify({\r\n             ...postData\r\n           })\r\n       };\r\n \r\n     return await fetchReq(apiUrl + url, fetchData, {\r\n         method: \"POST\"\r\n       }).then(res => res.json()).catch((err) => {\r\n          // tslint:disable-next-line: no-console\r\n          console.log(err);\r\n       });\r\n };","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Divider = function Divider(props) {\n  return /*#__PURE__*/React.createElement(ConfigConsumer, null, function (_ref) {\n    var _classNames;\n\n    var getPrefixCls = _ref.getPrefixCls,\n        direction = _ref.direction;\n\n    var customizePrefixCls = props.prefixCls,\n        _props$type = props.type,\n        type = _props$type === void 0 ? 'horizontal' : _props$type,\n        _props$orientation = props.orientation,\n        orientation = _props$orientation === void 0 ? 'center' : _props$orientation,\n        className = props.className,\n        children = props.children,\n        dashed = props.dashed,\n        plain = props.plain,\n        restProps = __rest(props, [\"prefixCls\", \"type\", \"orientation\", \"className\", \"children\", \"dashed\", \"plain\"]);\n\n    var prefixCls = getPrefixCls('divider', customizePrefixCls);\n    var orientationPrefix = orientation.length > 0 ? \"-\".concat(orientation) : orientation;\n    var hasChildren = !!children;\n    var classString = classNames(className, prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-text\"), hasChildren), _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-text\").concat(orientationPrefix), hasChildren), _defineProperty(_classNames, \"\".concat(prefixCls, \"-dashed\"), !!dashed), _defineProperty(_classNames, \"\".concat(prefixCls, \"-plain\"), !!plain), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames));\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      className: classString\n    }, restProps, {\n      role: \"separator\"\n    }), children && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-inner-text\")\n    }, children));\n  });\n};\n\nexport default Divider;","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { push } from \"connected-react-router\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { Form, Input, Button, Row, Col, Typography, message, Divider } from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { makePost } from \"../../api/apiRequest\";\r\nimport { setCookie } from \"../../services/cookie\";\r\n\r\nconst { Title, Paragraph } = Typography;\r\n\r\nconst FullBtn = styled(Button)`\r\n  width: 100%;\r\n`;\r\n\r\nconst SwitchLink = styled(Button)`\r\n  padding: 0px;\r\n  font-weight: bold;\r\n`;\r\n\r\nfunction Auth(props: { changePage: (arg0: string) => void; }) {\r\n\r\n  const [hasAccount, setHasAccount] = useState(true);\r\n  const [formLoading, setLoading] = useState(false);\r\n\r\n  useEffect(\r\n     () => {\r\n        message.info(\"Please login or register to continue\");\r\n  }, []);\r\n\r\n  const onFinish = async (values: { id: string; password: string; }) => {\r\n\r\n    setLoading(true);\r\n\r\n    const dataPost = {\r\n      email: values.id,\r\n      password: values.password\r\n    };\r\n    \r\n    try {\r\n      const response = await makePost(hasAccount ? \"login\" : \"register\", dataPost);\r\n      if (response.errors) {\r\n        message.error(\"Invalid details, try again\");    \r\n        setLoading(false);\r\n      } else {\r\n        setCookie(\"token\", response.token);\r\n        props.changePage(\"/dashboard\");\r\n      }\r\n    } catch (e) {\r\n      message.error(\"Invalid details, try again\");\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"layout\">\r\n      <Row>\r\n        <Col span={2} lg={8}/>     \r\n        <Col span={20} lg={8}>\r\n        <Title>{hasAccount ? \"Welcome back\" : \"Register now\"}</Title>\r\n        <Form\r\n            layout=\"vertical\"\r\n            name=\"basic\"\r\n            initialValues={{ remember: true }}\r\n            onFinish={onFinish}\r\n        >\r\n          <Form.Item\r\n            label=\"Email\"\r\n            name=\"id\"\r\n            rules={[{ required: true, message: \"Enter your email address\" }]}\r\n          >\r\n            <Input disabled={formLoading} />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            rules={[{ required: true, message: \"Enter your password\" }]}\r\n          >\r\n            <Input.Password disabled={formLoading} />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <FullBtn type=\"primary\" htmlType=\"submit\" loading={formLoading}>\r\n            {hasAccount ? \"Login\" : \"Register\"}\r\n            </FullBtn>\r\n          </Form.Item>\r\n          <SwitchLink \r\n                type=\"link\" \r\n                size=\"large\" \r\n                onClick={() => {\r\n                   setHasAccount(!hasAccount);\r\n                }}\r\n          >\r\n              {hasAccount ? \"New to the site? Register now\" : \"Have an account? Login now\"}\r\n          </SwitchLink>\r\n        </Form>\r\n        <Divider>Our terms</Divider>\r\n        <Paragraph>\r\n            By logging in you are accepting our terms and conditions and privacy policy. You can read\r\n            those &nbsp;\r\n             <SwitchLink \r\n                  type=\"link\" \r\n                  onClick={() => {\r\n                      props.changePage(\"/privacy-policy\");\r\n                  }}\r\n             >\r\n                here\r\n             </SwitchLink>\r\n        </Paragraph>\r\n        </Col>\r\n        <Col span={2} lg={8}/>    \r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({ counter }) => ({\r\n  userProfile: counter.userProfile\r\n});\r\n\r\nconst mapDispatchToProps = dispatch =>\r\n  bindActionCreators(\r\n    {\r\n      changePage: value => push(value),\r\n    },\r\n    dispatch\r\n  );\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)((Auth));"],"sourceRoot":""}